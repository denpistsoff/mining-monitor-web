{"ast":null,"code":"import _objectSpread from\"C:/Users/vapcbuild/Desktop/monitorASIC/web-dashboard/mining-monitor-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{MiningMonitorAPI}from'../utils/firebase';import'../styles/components/AlertsPanel.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AlertsPanel=_ref=>{let{farmName}=_ref;const[alerts,setAlerts]=useState([]);const[isExpanded,setIsExpanded]=useState(false);useEffect(()=>{const api=new MiningMonitorAPI(farmName);const unsubscribe=api.subscribeToAlerts(alertsData=>{if(alertsData){const alertsArray=Object.entries(alertsData).map(_ref2=>{let[id,alert]=_ref2;return _objectSpread({id},alert);}).filter(alert=>!alert.read).sort((a,b)=>b.timestamp-a.timestamp);setAlerts(alertsArray);}});return unsubscribe;},[farmName]);const markAsRead=alertId=>{const api=new MiningMonitorAPI(farmName);api.markAlertRead(alertId);};const getAlertIcon=severity=>{switch(severity){case'critical':return'üî¥';case'warning':return'üü°';case'info':return'üîµ';default:return'‚ö™';}};if(alerts.length===0&&!isExpanded){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-panel \".concat(isExpanded?'expanded':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-header\",onClick:()=>setIsExpanded(!isExpanded),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"alerts-icon\",children:\"\\uD83D\\uDEA8\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u041E\\u043F\\u043E\\u0432\\u0435\\u0449\\u0435\\u043D\\u0438\\u044F\"}),alerts.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"alerts-count\",children:alerts.length})]}),/*#__PURE__*/_jsx(\"button\",{className:\"alerts-toggle\",children:isExpanded?'‚ñº':'‚ñ∂'})]}),isExpanded&&/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-content\",children:[alerts.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-alerts\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u2705 \\u041D\\u0435\\u0442 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0445 \\u043E\\u043F\\u043E\\u0432\\u0435\\u0449\\u0435\\u043D\\u0438\\u0439\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"alerts-list\",children:alerts.map(alert=>/*#__PURE__*/_jsxs(\"div\",{className:\"alert-item alert-\".concat(alert.severity),children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert-icon\",children:getAlertIcon(alert.severity)}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert-message\",children:alert.message}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-time\",children:new Date(alert.timestamp).toLocaleString('ru-RU')})]}),/*#__PURE__*/_jsx(\"button\",{className:\"alert-dismiss\",onClick:()=>markAsRead(alert.id),title:\"\\u041E\\u0442\\u043C\\u0435\\u0442\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0447\\u0438\\u0442\\u0430\\u043D\\u043D\\u044B\\u043C\",children:\"\\xD7\"})]},alert.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"alerts-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-secondary\",onClick:()=>setIsExpanded(false),children:\"\\u0421\\u043A\\u0440\\u044B\\u0442\\u044C\"})})]})]});};export default AlertsPanel;","map":{"version":3,"names":["React","useState","useEffect","MiningMonitorAPI","jsx","_jsx","jsxs","_jsxs","AlertsPanel","_ref","farmName","alerts","setAlerts","isExpanded","setIsExpanded","api","unsubscribe","subscribeToAlerts","alertsData","alertsArray","Object","entries","map","_ref2","id","alert","_objectSpread","filter","read","sort","a","b","timestamp","markAsRead","alertId","markAlertRead","getAlertIcon","severity","length","className","concat","children","onClick","message","Date","toLocaleString","title"],"sources":["C:/Users/vapcbuild/Desktop/monitorASIC/web-dashboard/mining-monitor-web/src/components/AlertsPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { MiningMonitorAPI } from '../utils/firebase';\r\nimport '../styles/components/AlertsPanel.css';\r\n\r\nconst AlertsPanel = ({ farmName }) => {\r\n  const [alerts, setAlerts] = useState([]);\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const api = new MiningMonitorAPI(farmName);\r\n    \r\n    const unsubscribe = api.subscribeToAlerts((alertsData) => {\r\n      if (alertsData) {\r\n        const alertsArray = Object.entries(alertsData)\r\n          .map(([id, alert]) => ({ id, ...alert }))\r\n          .filter(alert => !alert.read)\r\n          .sort((a, b) => b.timestamp - a.timestamp);\r\n        \r\n        setAlerts(alertsArray);\r\n      }\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [farmName]);\r\n\r\n  const markAsRead = (alertId) => {\r\n    const api = new MiningMonitorAPI(farmName);\r\n    api.markAlertRead(alertId);\r\n  };\r\n\r\n  const getAlertIcon = (severity) => {\r\n    switch (severity) {\r\n      case 'critical': return 'üî¥';\r\n      case 'warning': return 'üü°';\r\n      case 'info': return 'üîµ';\r\n      default: return '‚ö™';\r\n    }\r\n  };\r\n\r\n  if (alerts.length === 0 && !isExpanded) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`alerts-panel ${isExpanded ? 'expanded' : ''}`}>\r\n      <div className=\"alerts-header\" onClick={() => setIsExpanded(!isExpanded)}>\r\n        <div className=\"alerts-title\">\r\n          <span className=\"alerts-icon\">üö®</span>\r\n          <span>–û–ø–æ–≤–µ—â–µ–Ω–∏—è</span>\r\n          {alerts.length > 0 && (\r\n            <span className=\"alerts-count\">{alerts.length}</span>\r\n          )}\r\n        </div>\r\n        <button className=\"alerts-toggle\">\r\n          {isExpanded ? '‚ñº' : '‚ñ∂'}\r\n        </button>\r\n      </div>\r\n\r\n      {isExpanded && (\r\n        <div className=\"alerts-content\">\r\n          {alerts.length === 0 ? (\r\n            <div className=\"no-alerts\">\r\n              <span>‚úÖ –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–æ–≤–µ—â–µ–Ω–∏–π</span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"alerts-list\">\r\n              {alerts.map(alert => (\r\n                <div key={alert.id} className={`alert-item alert-${alert.severity}`}>\r\n                  <div className=\"alert-icon\">\r\n                    {getAlertIcon(alert.severity)}\r\n                  </div>\r\n                  <div className=\"alert-content\">\r\n                    <div className=\"alert-message\">{alert.message}</div>\r\n                    <div className=\"alert-time\">\r\n                      {new Date(alert.timestamp).toLocaleString('ru-RU')}\r\n                    </div>\r\n                  </div>\r\n                  <button \r\n                    className=\"alert-dismiss\"\r\n                    onClick={() => markAsRead(alert.id)}\r\n                    title=\"–û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º\"\r\n                  >\r\n                    √ó\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"alerts-actions\">\r\n            <button \r\n              className=\"btn btn-sm btn-secondary\"\r\n              onClick={() => setIsExpanded(false)}\r\n            >\r\n              –°–∫—Ä—ã—Ç—å\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AlertsPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
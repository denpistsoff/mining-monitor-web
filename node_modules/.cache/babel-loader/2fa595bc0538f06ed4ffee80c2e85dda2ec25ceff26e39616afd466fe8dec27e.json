{"ast":null,"code":"import React,{useState,useEffect}from'react';import StatsGrid from'./StatsGrid';import ContainerCard from'./ContainerCard';import{MiningMonitorAPI}from'../utils/firebase';import'../styles/components/Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=_ref=>{var _minersData$total_sta,_minersData$total_sta2,_minersData$total_sta3,_minersData$total_sta4;let{farmName}=_ref;const[farmData,setFarmData]=useState(null);const[minersData,setMinersData]=useState(null);const[loading,setLoading]=useState(true);const[lastUpdate,setLastUpdate]=useState(null);useEffect(()=>{const api=new MiningMonitorAPI(farmName);// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–µ –º–∞–π–Ω–µ—Ä–æ–≤\nconst unsubscribeMiners=api.subscribeToMiners(data=>{if(data){setMinersData(data);setLastUpdate(new Date());setLoading(false);}});// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–µ —Ñ–µ—Ä–º—ã\nconst unsubscribeFarm=api.subscribeToFarmData(data=>{if(data){setFarmData(data);}});// –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ\nconst interval=setInterval(()=>{setLastUpdate(new Date());},30000);return()=>{unsubscribeMiners();unsubscribeFarm();clearInterval(interval);};},[farmName]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner large\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u0435\\u043C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043C\\u0430\\u0439\\u043D\\u0435\\u0440\\u043E\\u0432...\"})]});}if(!minersData){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-error\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"error-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043C\\u0430\\u0439\\u043D\\u0435\\u0440\\u043E\\u0432\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041E\\u0431\\u0437\\u043E\\u0440 \\u0444\\u0435\\u0440\\u043C\\u044B\"}),lastUpdate&&/*#__PURE__*/_jsxs(\"span\",{className:\"last-update\",children:[\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043E: \",lastUpdate.toLocaleTimeString('ru-RU')]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>window.location.reload(),children:\"\\uD83D\\uDD04 \\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(StatsGrid,{stats:minersData.total_stats}),/*#__PURE__*/_jsxs(\"section\",{className:\"containers-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"\\u041A\\u043E\\u043D\\u0442\\u0435\\u0439\\u043D\\u0435\\u0440\\u044B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"containers-grid\",children:Object.entries(minersData.containers||{}).map(_ref2=>{let[containerId,container]=_ref2;return/*#__PURE__*/_jsx(ContainerCard,{containerId:containerId,container:container},containerId);})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"quick-stats\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"\\u0411\\u044B\\u0441\\u0442\\u0440\\u044B\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quick-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"\\u0412\\u0441\\u0435\\u0433\\u043E \\u043C\\u0430\\u0439\\u043D\\u0435\\u0440\\u043E\\u0432\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:((_minersData$total_sta=minersData.total_stats)===null||_minersData$total_sta===void 0?void 0:_minersData$total_sta.total_miners)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"\\u041E\\u043D\\u043B\\u0430\\u0439\\u043D\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value success\",children:((_minersData$total_sta2=minersData.total_stats)===null||_minersData$total_sta2===void 0?void 0:_minersData$total_sta2.online_miners)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"\\u041E\\u0444\\u043B\\u0430\\u0439\\u043D\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value danger\",children:((_minersData$total_sta3=minersData.total_stats)===null||_minersData$total_sta3===void 0?void 0:_minersData$total_sta3.offline_miners)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u044B\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value warning\",children:((_minersData$total_sta4=minersData.total_stats)===null||_minersData$total_sta4===void 0?void 0:_minersData$total_sta4.problematic_miners)||0})]})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","StatsGrid","ContainerCard","MiningMonitorAPI","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","_minersData$total_sta","_minersData$total_sta2","_minersData$total_sta3","_minersData$total_sta4","farmName","farmData","setFarmData","minersData","setMinersData","loading","setLoading","lastUpdate","setLastUpdate","api","unsubscribeMiners","subscribeToMiners","data","Date","unsubscribeFarm","subscribeToFarmData","interval","setInterval","clearInterval","className","children","toLocaleTimeString","onClick","window","location","reload","stats","total_stats","Object","entries","containers","map","_ref2","containerId","container","total_miners","online_miners","offline_miners","problematic_miners"],"sources":["C:/Users/vapcbuild/Desktop/monitorASIC/web-dashboard/mining-monitor-web/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport StatsGrid from './StatsGrid';\r\nimport ContainerCard from './ContainerCard';\r\nimport { MiningMonitorAPI } from '../utils/firebase';\r\nimport '../styles/components/Dashboard.css';\r\n\r\nconst Dashboard = ({ farmName }) => {\r\n  const [farmData, setFarmData] = useState(null);\r\n  const [minersData, setMinersData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const api = new MiningMonitorAPI(farmName);\r\n    \r\n    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–µ –º–∞–π–Ω–µ—Ä–æ–≤\r\n    const unsubscribeMiners = api.subscribeToMiners((data) => {\r\n      if (data) {\r\n        setMinersData(data);\r\n        setLastUpdate(new Date());\r\n        setLoading(false);\r\n      }\r\n    });\r\n\r\n    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–µ —Ñ–µ—Ä–º—ã\r\n    const unsubscribeFarm = api.subscribeToFarmData((data) => {\r\n      if (data) {\r\n        setFarmData(data);\r\n      }\r\n    });\r\n\r\n    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ\r\n    const interval = setInterval(() => {\r\n      setLastUpdate(new Date());\r\n    }, 30000);\r\n\r\n    return () => {\r\n      unsubscribeMiners();\r\n      unsubscribeFarm();\r\n      clearInterval(interval);\r\n    };\r\n  }, [farmName]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"dashboard-loading\">\r\n        <div className=\"loading-spinner large\"></div>\r\n        <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –º–∞–π–Ω–µ—Ä–æ–≤...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!minersData) {\r\n    return (\r\n      <div className=\"dashboard-error\">\r\n        <div className=\"error-icon\">‚ö†Ô∏è</div>\r\n        <h3>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</h3>\r\n        <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –º–∞–π–Ω–µ—Ä–æ–≤</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <div className=\"dashboard-header\">\r\n        <div className=\"dashboard-title\">\r\n          <h2>–û–±–∑–æ—Ä —Ñ–µ—Ä–º—ã</h2>\r\n          {lastUpdate && (\r\n            <span className=\"last-update\">\r\n              –û–±–Ω–æ–≤–ª–µ–Ω–æ: {lastUpdate.toLocaleTimeString('ru-RU')}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <button \r\n          className=\"btn btn-primary\"\r\n          onClick={() => window.location.reload()}\r\n        >\r\n          üîÑ –û–±–Ω–æ–≤–∏—Ç—å\r\n        </button>\r\n      </div>\r\n\r\n      {/* –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}\r\n      <StatsGrid stats={minersData.total_stats} />\r\n\r\n      {/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –º–∞–π–Ω–µ—Ä–∞–º–∏ */}\r\n      <section className=\"containers-section\">\r\n        <h3 className=\"section-title\">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</h3>\r\n        <div className=\"containers-grid\">\r\n          {Object.entries(minersData.containers || {}).map(([containerId, container]) => (\r\n            <ContainerCard\r\n              key={containerId}\r\n              containerId={containerId}\r\n              container={container}\r\n            />\r\n          ))}\r\n        </div>\r\n      </section>\r\n\r\n      {/* –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ç—É—Å */}\r\n      <section className=\"quick-stats\">\r\n        <h3 className=\"section-title\">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ç—É—Å</h3>\r\n        <div className=\"quick-stats-grid\">\r\n          <div className=\"quick-stat\">\r\n            <span className=\"stat-label\">–í—Å–µ–≥–æ –º–∞–π–Ω–µ—Ä–æ–≤</span>\r\n            <span className=\"stat-value\">{minersData.total_stats?.total_miners || 0}</span>\r\n          </div>\r\n          <div className=\"quick-stat\">\r\n            <span className=\"stat-label\">–û–Ω–ª–∞–π–Ω</span>\r\n            <span className=\"stat-value success\">{minersData.total_stats?.online_miners || 0}</span>\r\n          </div>\r\n          <div className=\"quick-stat\">\r\n            <span className=\"stat-label\">–û—Ñ–ª–∞–π–Ω</span>\r\n            <span className=\"stat-value danger\">{minersData.total_stats?.offline_miners || 0}</span>\r\n          </div>\r\n          <div className=\"quick-stat\">\r\n            <span className=\"stat-label\">–ü—Ä–æ–±–ª–µ–º—ã</span>\r\n            <span className=\"stat-value warning\">{minersData.total_stats?.problematic_miners || 0}</span>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}